<Window x:Class="WpfParadojaGemelos.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfParadojaGemelos"
        mc:Ignorable="d"
        Title="Paradoja de los Gemelos" 
        Height="450" Width="900"  
        Icon="/recursos/acortes.png" 
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResizeWithGrip"
        Background="{StaticResource BackgroundBrush}">
    <Grid Margin="{StaticResource Spacing}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Panel izquierdo: datos -->
        <Grid Name="GrdDatagrid" Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,8">
                <Button x:Name="btnLimpiarGrid"
                Style="{DynamicResource PlantilllaBotonAzul}"
                Content="Limpiar"
                Width="84" Height="28"
                Click="btnLimpiarGrid_Click"
                TabIndex="3"
                ToolTip="Limpia la tabla de valores"
                AutomationProperties.Name="Botón Limpiar"/>
                <Button x:Name="btnEliminarElemento"
                Style="{DynamicResource PlantilllaBotonAzul}"
                Content="Eliminar"
                Width="84" Height="28"
                Margin="{StaticResource Spacing}"
                Click="btnEliminarElemento_Click"
                TabIndex="3"
                ToolTip="Elimina el elemento seleccionado"
                AutomationProperties.Name="Botón Eliminar"/>
            </StackPanel>

            <DataGrid x:Name="DGDatos"
                Grid.Row="1"
                AutoGenerateColumns="False"
                Margin="0"
                IsReadOnly="True"
                Style="{StaticResource BaseDataGrid}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="T. Viajero" Binding="{Binding Tiempo_Viajero}" />
                    <DataGridTextColumn Header="% C" Binding="{Binding Porcentaje_C}" />
                    <DataGridTextColumn Header="T. Observador" Binding="{Binding Tiempo_Observador, StringFormat={}{0:F8}}" />
                    <DataGridTextColumn Header="Masa relativa" Binding="{Binding Masa_Relativa, StringFormat={}{0:F6}}" />
                    <DataGridTemplateColumn Header="%" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <ProgressBar Minimum="0" Maximum="100" Value="{Binding Porcentaje_C ,Mode=OneWay}" Background="Transparent" Height="12"/>
                                    <TextBlock Text="{Binding Porcentaje_C}" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource TextPrimaryBrush}" FontSize="{StaticResource Caption}"/>
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
        <!-- Imagen cohete intermedia -->
        <Image x:Name="imgCohete"
           Source="/starsship.png"
           Grid.Column="1"
           HorizontalAlignment="Center"
           VerticalAlignment="Bottom"
           Height="81"
           Margin="{StaticResource Spacing}"
           AutomationProperties.Name="Imagen Cohete">
            <Image.RenderTransform>
                <TranslateTransform x:Name="AnimacionCohete" X="0" Y="0"/>
            </Image.RenderTransform>
        </Image>

        <!-- Panel derecho: controles -->
        <Grid x:Name="grdContoles" Grid.Column="2" Margin="16,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="46*"/>
                <RowDefinition Height="220*"/>
                <RowDefinition Height="60*"/>
                <RowDefinition Height="100*"/>
            </Grid.RowDefinitions>
            <Button x:Name="btnAbout"
              Style="{DynamicResource PlantilllaBotonAzul}"
              Width="36" Height="36"
              HorizontalAlignment="Right"
              Click="btnAbout_Click"
              ToolTip="Acerca de..."
              AutomationProperties.Name="Botón Acerca de">
                <Image Source="/acercade.png" />
            </Button>

            <Button x:Name="btnGrafico" 
                    Style="{DynamicResource PlantilllaBotonAzul}" 
                    Content="Gráfico" 
                    HorizontalAlignment="Left" 
                    Margin="94,18,0,0" 
                    VerticalAlignment="Top" 
                    Height="30" 
                    Width="75" 
                    Click="btnGrafico_Click" 
                    FontSize="14" 
                    ToolTip="Genera el gráfico con los datos de la tabla" 
                    Grid.Row="2"/>
            <Label x:Name="lblTiempo" 
                   Content="Tiempo del viajero" 
                   HorizontalAlignment="Left" 
                   Margin="10,12,0,0" 
                   VerticalAlignment="Top" 
                   FontWeight="Bold" 
                   FontSize="16" 
                   TabIndex="0" 
                   Grid.Row="1" 
                   Height="31" 
                   Width="150"/>
            <TextBox x:Name="txtTiempo" 
                     HorizontalAlignment="Left" 
                     Margin="276,42,0,0" 
                     TextWrapping="Wrap" 
                     Text="{Binding ElementName=sldTiempoV, Path=Value, Mode=TwoWay}" 
                     VerticalAlignment="Top" 
                     Width="158" 
                     Grid.Row="1"  
                     FontSize="16" 
                     KeyDown="txtTiempo_KeyDown" 
                     Height="23" 
                     TabIndex="0"/>
            <Label x:Name="lblVelocidad" 
                   Content="% Velocidad de la luz" 
                   HorizontalAlignment="Left" 
                   Margin="10,89,0,0" 
                   VerticalAlignment="Top" 
                   FontWeight="Bold" 
                   FontSize="16" 
                   Grid.Row="1"  
                   Height="31" 
                   Width="168"/>
            <TextBox x:Name="txtVelocidad" 
                     HorizontalAlignment="Left" 
                     Margin="276,120,0,0" 
                     TextWrapping="Wrap" 
                     Text="{Binding ElementName=sldPorcentajeC, Path=Value, Mode=TwoWay}" 
                     VerticalAlignment="Top" 
                     Width="158" 
                     Grid.Row="1" 
                     FontSize="16" 
                     TabIndex="1" 
                     KeyDown="txtVelocidad_KeyDown" 
                     Height="23"/>
            <Slider x:Name="sldTiempoV" 
                    HorizontalAlignment="Left" 
                    Margin="10,48,0,0" 
                    VerticalAlignment="Top" 
                    Width="261" 
                    Minimum="1" 
                    Maximum="50" 
                    TickPlacement="BottomRight" 
                    TickFrequency="1" 
                    IsSnapToTickEnabled="True" 
                    Height="36" 
                    Grid.Row="1"/>
            <Slider x:Name="sldPorcentajeC" 
                    HorizontalAlignment="Left" 
                    Margin="10,125,0,0" 
                    VerticalAlignment="Top" 
                    Width="261" 
                    Minimum="0" 
                    Maximum="100" 
                    TickPlacement="BottomRight" 
                    TickFrequency="5"  
                    Height="36" 
                    Grid.Row="1"/>
            <Button x:Name="btnCalcular" 
                    Style="{DynamicResource PlantilllaBotonVerde}" 
                    Content="Calcular" 
                    HorizontalAlignment="Left" 
                    Margin="347,15,0,0" 
                    VerticalAlignment="Top" 
                    FontSize="16" 
                    Height="38" 
                    Width="90" 
                    Click="btnCalcular_Click" 
                    IsDefault="True" 
                    TabIndex="2" 
                    Grid.Row="2"/>
            <Label x:Name="lblTiempo2" 
                   Content="" 
                   HorizontalAlignment="Left" 
                   Margin="0,3,0,0" 
                   VerticalAlignment="Top" 
                   FontWeight="Bold" 
                   FontSize="16" 
                   Grid.Row="3" 
                   Height="32" 
                   Width="187"/>
            <Label x:Name="lblResultado" 
                   HorizontalAlignment="Center" 
                   Margin="0,5,0,0" 
                   VerticalAlignment="Top" 
                   FontSize="48" 
                   FontWeight="Bold" 
                   Width="438" 
                   Height="65" 
                   Grid.Row="3" 
                   VerticalContentAlignment="Top"/>
            <CheckBox x:Name="chkGraficar" 
                      Content="Graficar" 
                      HorizontalAlignment="Left" 
                      Margin="10,26,0,0" 
                      VerticalAlignment="Top" 
                      Checked="chkGraficar_Checked" 
                      Unchecked="chkGraficar_Unchecked" 
                      ToolTip="Hablilita la opción para graficar y autogenera los datos del 0-99 de la velocidad de la luz" 
                      Grid.Row="2"/>

            <Label Grid.Row="1" 
                   Margin="10,150,0,0" 
                   Content="Masa" 
                   FontWeight="Bold" 
                   FontSize="16" 
                   VerticalAlignment="Top" 
                   HorizontalAlignment="Left" 
                   Width="50" />
            <TextBox x:Name="txtMasaReposo" 
                     Grid.Row="1" 
                     Text="0" 
                     Margin="10,180,0,0" 
                     VerticalAlignment="Top" 
                     HorizontalAlignment="Left" 
                     Width="158" 
                     FontSize="16"/>
            <Label Grid.Row="1" 
                   Margin="200,150,0,0" 
                   Content="Masa Relativa" 
                   FontWeight="Bold" 
                   FontSize="16" 
                   VerticalAlignment="Top" 
                   HorizontalAlignment="Left" 
                   Width="119" />
            <TextBox x:Name="txtMasaRelativa" 
                     Grid.Row="1" 
                     Margin="200,180,0,0" 
                     VerticalAlignment="Top" 
                     HorizontalAlignment="Left" 
                     Width="158" 
                     FontSize="16" 
                     IsReadOnly="True"/>


        </Grid>
    </Grid>
    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <!--<ParallelTimeline RepeatBehavior="Forever" AutoReverse="True">-->
                    <ParallelTimeline RepeatBehavior="Forever" AutoReverse="True">
                        <DoubleAnimation Storyboard.TargetName="AnimacionCohete" Storyboard.TargetProperty="Y" From="0" To="-325" Duration="0:0:2"/>
                    </ParallelTimeline>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Window.Triggers>
</Window>
